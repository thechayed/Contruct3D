"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[756],{756:(t,e,o)=>{o.d(e,{STLExporter:()=>n});var r=o(9451);class n{parse(t,e={}){const o=(e=Object.assign({binary:!1},e)).binary,n=[];let s,a=0;t.traverse((function(t){if(t.isMesh){const e=t.geometry,o=e.index,r=e.getAttribute("position");a+=null!==o?o.count/3:r.count/3,n.push({object3d:t,geometry:e})}}));let i=80;if(!0===o){const t=new ArrayBuffer(2*a+3*a*4*4+80+4);s=new DataView(t),s.setUint32(i,a,!0),i+=4}else s="",s+="solid exported\n";const l=new r.Vector3,c=new r.Vector3,f=new r.Vector3,u=new r.Vector3,p=new r.Vector3,y=new r.Vector3;for(let t=0,e=n.length;t<e;t++){const e=n[t].object3d,o=n[t].geometry,r=o.index,s=o.getAttribute("position");if(null!==r)for(let t=0;t<r.count;t+=3)d(r.getX(t+0),r.getX(t+1),r.getX(t+2),s,e);else for(let t=0;t<s.count;t+=3)d(t+0,t+1,t+2,s,e)}return!1===o&&(s+="endsolid exported\n"),s;function d(t,e,r,n,a){l.fromBufferAttribute(n,t),c.fromBufferAttribute(n,e),f.fromBufferAttribute(n,r),!0===a.isSkinnedMesh&&(a.applyBoneTransform(t,l),a.applyBoneTransform(e,c),a.applyBoneTransform(r,f)),l.applyMatrix4(a.matrixWorld),c.applyMatrix4(a.matrixWorld),f.applyMatrix4(a.matrixWorld),function(t,e,r){u.subVectors(r,e),p.subVectors(t,e),u.cross(p).normalize(),y.copy(u).normalize(),!0===o?(s.setFloat32(i,y.x,!0),i+=4,s.setFloat32(i,y.y,!0),i+=4,s.setFloat32(i,y.z,!0),i+=4):(s+="\tfacet normal "+y.x+" "+y.y+" "+y.z+"\n",s+="\t\touter loop\n")}(l,c,f),x(l),x(c),x(f),!0===o?(s.setUint16(i,0,!0),i+=2):(s+="\t\tendloop\n",s+="\tendfacet\n")}function x(t){!0===o?(s.setFloat32(i,t.x,!0),i+=4,s.setFloat32(i,t.y,!0),i+=4,s.setFloat32(i,t.z,!0),i+=4):s+="\t\t\tvertex "+t.x+" "+t.y+" "+t.z+"\n"}}}}}]);